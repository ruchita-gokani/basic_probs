"""#sample csv:  bw.csv
#time_created,dashboard_id,serial_num,device_type,fw_version,bandwidth,wifi_strength
7/8/2020 22:09,1094,G8T1GH0002050043,catalina,10.12,5279,-16
7/8/2020 22:10,1095,G8T1GH000045005L,catalina,10.12,5454,-25
7/8/2020 22:11,1096,815059688,xt2,7.97,6165,-17
7/8/2020 22:11,1097,876203851,xt2,7.97,4303,-30
7/8/2020 22:12,1098,867000630,xt2c,8.52,4967,-21
7/8/2020 22:13,1099,827000797,xt2c,8.52,5027,-30
7/8/2020 22:13,1100,G8T1JX000205003C,catalina,10.3,4719,-23
7/8/2020 22:14,1101,G8T1JX000205002E,catalina,10.3,4702,-26
7/8/2020 22:15,48,G8T19000010244UW,owl,9.63,4542,na
7/8/2020 22:15,48,G8T19000010244UM,owl,9.63,2150,na
7/8/2020 22:16,1094,G8T1GH0002050043,catalina,10.12,5064,-22
7/8/2020 22:17,1095,G8T1GH000045005L,catalina,10.12,5370,-26
7/8/2020 22:18,1096,815059688,xt2,7.97,5563,-20
7/8/2020 22:18,1097,876203851,xt2,7.97,4506,-30
7/8/2020 22:19,1098,867000630,xt2c,8.52,5303,-21
7/8/2020 22:20,1099,827000797,xt2c,8.52,5322,-28
7/8/2020 22:20,1100,G8T1JX000205003C,catalina,10.3,4621,-24
7/8/2020 22:21,1101,G8T1JX000205002E,catalina,10.3,4957,-29
7/8/2020 22:22,48,G8T19000010244UW,owl,9.63,3938,na
7/8/2020 22:22,48,G8T19000010244UM,owl,9.63,2399,na
7/8/2020 22:23,1094,G8T1GH0002050043,catalina,10.12,5343,-22
7/8/2020 22:17,1095,G8T1GH000045005L,catalina,10.12,5370,-25
7/8/2020 22:18,1096,815059688,xt2,7.97,5563,-20
7/8/2020 22:18,1097,876203851,xt2,7.97,4506,-30
7/8/2020 22:19,1098,867000630,xt2c,8.52,5303,-20
7/8/2020 22:26,1099,827000797,xt2c,8.52,5352,-28
7/8/2020 22:27,1100,G8T1JX000205003C,catalina,10.3,4670,-26
7/8/2020 22:28,1101,G8T1JX000205002E,catalina,10.3,5007,-29
7/8/2020 22:28,48,G8T19000010244UW,owl,9.63,4464,na
7/8/2020 22:29,48,G8T19000010244UM,owl,9.63,2253,na"""

#2) read in CSV file and find the average BW for all devices / records in the bw.csv results file


def bw_avg(t_file):
    with open(t_file, 'r') as test_file:
        bw = 0
        count = 0
        next(test_file)
        for line in test_file.readlines():
            x = line.split(',')
            bw += float(x[5])
            count+=1
            print(bw/count)

    return bw/count


if __name__ == '__main__':
    print("The average bandwidth is {}".format(bw_avg('usage_files/bw.csv')))
